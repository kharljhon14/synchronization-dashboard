# User Synchronization Dashboard

A Full Stack Engineer (Senior) assessment project built with Next.js App Router, Supabase (PostgreSQL), and shadcn/ui.  
The app demonstrates end-to-end feature development — from database interaction and API integration to responsive UI feedback.

---

## Tech Stack

- **Framework:** Next.js 14 (App Router, TypeScript)
- **Database:** Supabase (PostgreSQL)
- **UI Library:** shadcn/ui + TailwindCSS
- **API:** Next.js Server Actions (simulated external sync)
- **Language:** TypeScript

---

## Objective

Build a dashboard that allows syncing user data with a simulated external system.  
This project demonstrates:

- Full-stack feature design
- Server Actions for backend logic
- Supabase database integration
- UI state feedback (loading, success, error)

---

## Features

- Display all users and their sync status
- “Sync Data” button for unsynced users
- Simulated API call delay (1–2 seconds)
- Updates `synced_at` timestamp in Supabase
- Responsive UI feedback using shadcn/ui components

---

## Architecture Overview

| Layer          | Tool                   | Description                                            |
| -------------- | ---------------------- | ------------------------------------------------------ |
| **Database**   | Supabase (PostgreSQL)  | `users` table stores user records with sync timestamps |
| **Backend**    | Next.js Server Actions | Handles syncing logic and database updates             |
| **Frontend**   | shadcn/ui + React      | Displays users with real-time updates                  |
| **Deployment** | Vercel + Supabase      | Fully cloud-deployable setup                           |

---

## Database Schema

```sql
create table users (
  id bigint generated by default as identity primary key,
  name text not null,
  email text unique not null,
  synced_at timestamptz
);
```

### Seed Data

```sql
truncate table users restart identity;

insert into users (name, email, synced_at) values
('Ava Santos', 'ava.santos@example.com', null),
('Miguel Reyes', 'miguel.reyes@example.com', '2025-09-01T10:00:00Z'),
('Luna Garcia', 'luna.garcia@example.com', null),
('Noah Cruz', 'noah.cruz@example.com', '2025-10-01T14:30:00Z'),
('Sofia Dela Rosa', 'sofia.delarosa@example.com', null),
('Ethan Villanueva', 'ethan.villanueva@example.com', null),
('Isabella Ramos', 'isabella.ramos@example.com', '2025-08-15T12:00:00Z'),
('Lucas Bautista', 'lucas.bautista@example.com', null),
('Camila Navarro', 'camila.navarro@example.com', '2025-09-22T09:45:00Z'),
('Daniel Tan', 'daniel.tan@example.com', null);
```

---

## Environment Variables

Create a `.env.local` file at the root of your project:

```bash
NEXT_PUBLIC_SUPABASE_URL=https://your-project-url.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-public-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
```

The **Service Role Key** is only used on the server (Server Actions).  
Never expose it to the client.

---

## Folder Structure

```
app/
 ├─ layout.tsx
 ├─ sync-dashboard/
 │   ├─ page.tsx
 │   ├─ actions.ts
components/
 ├─ UserRow.tsx
lib/
 ├─ supabaseClient.ts
 ├─ supabaseServer.ts
```

---

## How It Works

1. **Data Fetching (Server):**  
   The dashboard fetches all users server-side from Supabase.

2. **Sync API (Server Action):**  
   Clicking "Sync Data" triggers a simulated API call (1.5s delay),  
   then updates the user’s `synced_at` timestamp.

3. **UI Feedback (Client):**
   - The button disables while syncing
   - The interface updates instantly after sync completes

---

## Evaluation Focus

- Clean, strongly typed TypeScript code
- Efficient database queries
- Smooth user experience and feedback
- Clear error handling and state management

---

## AI Reflection

AI tools were used to:

- Scaffold the project structure and boilerplate
- Generate documentation and setup instructions

This allowed focus on architecture, Supabase integration, and UI experience.

---

## Step-by-Step Setup Guide

### Prerequisites

Ensure you have the following installed:

- Node.js 18+
- pnpm
- Supabase account (optional)
- Git

---

### 1. Clone the Project

```bash
git clone https://github.com/kharljhon14/synchronization-dashboard
cd synchronization-dashboard
```

---

### 2. Install Dependencies

```bash
pnpm install
```

---

### 3. Set Up Supabase

1. Go to [https://supabase.com](https://supabase.com)
2. Create a new project
3. Open the SQL Editor and run the table and seed scripts above

---

### 4. Configure Environment Variables

Create a `.env.local` file in the root directory and add:

```bash
NEXT_PUBLIC_SUPABASE_URL=https://your-project-url.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-public-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
```

---

### 5. Run the App

```bash
npm run dev
```

Then visit:  
[http://localhost:3000/sync-dashboard](http://localhost:3000/sync-dashboard)

You should see:

- Users loaded from Supabase
- "Sync Data" buttons for unsynced users
- Real-time updates when syncing

---

### 6. Test the Sync

1. Click **Sync Data** beside any user with "Not synced"
2. The button disables and shows a loading state
3. The timestamp updates in the UI and database
